---
title: "Curriculum"
output:
  github_document:
    df_print: tibble
editor_options: 
  chunk_output_type: console
---






```{r global_options, include=FALSE}
source(here::here("common.R"))
library(knitr)
```


```{r,message=FALSE}
library(tidyverse)
library(yingtools2)
# library(phyloseq)
library(scales)
library(ggtree)
library(survival)
```

### R tasks to learn
```{r,echo=FALSE}

rows <- c(
  "Subset a vector by index"="x[3]",
  "Subset by condition"="x[x>3]",
  "Sort a variable"="x[order(x)]",
  "Left join"="left_join(x,y,by=\"var\")",
  "Inner join"="inner_join(x,y,by=\"var\")",
  "Read a CSV file"="read_csv(...)",
  "Group by"="data %>% group_by(...) %>% [code] %>% ungroup()",
  "Melt"="data %>% pivot_longer(...)",
  "Cast"="data %>% pivot_wider(...)",
  "Split a character vector"="str_split(\"the quick brown fox\",\" \")",
  "Split a column into several columns"="data %>% separate(...)",
  "recode a character based on multiple regex criteria"="recode.grep(vec,c(\"abc\"=\"def\"))",
  "xxxxx"="xxxxx",
  "xxxxx"="xxxxx")

t <- tibble(Task=names(rows),Code=paste0("`",rows,"`"))

knitr::kable(t)

```




### ggplot2 tasks to learn

```{r}
s <- get.samp(cid.phy,stats=TRUE)
```



```{r score_table2, fig.show = "hide", echo = FALSE, fig.height=2, fig.width=3,echo=FALSE}

vec <- c("scatterplot"="ggplot(s,aes(x=day,y=InvSimpson)) + geom_point()",
         "scatterplot with smoother"="ggplot(s,aes(x=day,y=InvSimpson)) + geom_point() + geom_smooth()",
         "histogram"="ggplot(s,aes(x=day)) + geom_histogram()",
         "Bar plot"="ggplot(s,aes(x=Consistency,fill=Consistency)) + geom_bar()",
         "Phylogenetic tree"="tr <- phy_tree(cid.phy)\nggtree(tr)",
         "Phylogenetic tree with circular tips"="tr <- phy_tree(cid.phy)\nggtree(tr,layout=\"circular\")",
         "OTU heatmap"="otu <- cid.phy %>% phy.collapse(taxranks=c(\"Kingdom\",\"Phylum\",\"Class\",\"Order\",\"Family\",\"Genus\")) %>% get.otu.melt(filter.zero=FALSE) %>% ggplot(aes(x=sample,y=otu,fill=pctseqs)) + geom_tile() + scale_fill_continuous(trans=log_epsilon_trans(0.0001)) + theme(axis.text=element_blank())",
         NULL)


cid.patients %>% cox(vre.bsi,enterodom30)



vec.md <- paste0("```",vec,"```")

glist <- lapply(vec,function(x) {
  eval(parse(text=x))
})

invisible(lapply(glist, print))
out <- cbind(names(vec),vec.md,sprintf("![](%s%s-%s.png)",
                     opts_current$get("fig.path"),
                     opts_current$get("label"),
                     seq_along(glist)))

kable(out,col.names=c("Task","Code","Plot"))
```
